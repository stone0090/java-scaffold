(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ObQG:function(B,x,a){B.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(B,x,a){"use strict";a.r(x);var ie=a("DYRE"),G=a("zeV3"),le=a("miYZ"),F=a("tsqr"),m=a("k1fw"),h=a("9og8"),M=a("tJVT"),ue=a("fOrg"),$=a("+KLJ"),J=a("WmNS"),c=a.n(J),w=a("cJ7L"),L=a("FY4R"),V=a("3flX"),Y=a("Y0UT"),D=a("80zm"),R=a("CZrw"),y=a("q1tI"),W=a("VMEa"),S=a("Qurx"),X=a("/aGu"),Z=a("tneF"),t=a("9kvl"),K=a("CwrG"),Q=a("74pX");function H(v,d){return C.apply(this,arguments)}function C(){return C=Object(h.a)(c.a.mark(function v(d,f){return c.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(t.e)("/api/login/captcha",Object(m.a)({method:"POST",params:Object(m.a)({},d)},f||{})));case 1:case"end":return p.stop()}},v)})),C.apply(this,arguments)}var k=a("ObQG"),s=a.n(k),e=a("nKUr"),T=function(d){var f=d.content;return Object(e.jsx)($.a,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},q=function(){!t.c||setTimeout(function(){var d=t.c.location.query,f=d,b=f.redirect;t.c.push(b||"/")},10)},_=function(){var d=Object(y.useState)(!1),f=Object(M.a)(d,2),b=f[0],p=f[1],ee=Object(y.useState)({}),I=Object(M.a)(ee,2),z=I[0],ae=I[1],se=Object(y.useState)("account"),P=Object(M.a)(se,2),N=P[0],oe=P[1],U=Object(t.i)("@@initialState"),O=U.initialState,te=U.setInitialState,o=Object(t.h)(),re=function(){var g=Object(h.a)(c.a.mark(function n(){var i,u;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O==null||(i=O.fetchUserInfo)===null||i===void 0?void 0:i.call(O);case 2:u=r.sent,u&&te(Object(m.a)(Object(m.a)({},O),{},{currentUser:u}));case 4:case"end":return r.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),ne=function(){var g=Object(h.a)(c.a.mark(function n(i){var u,j,r;return c.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return p(!0),l.prev=1,l.next=4,Object(Q.c)(Object(m.a)(Object(m.a)({},i),{},{type:N}));case 4:if(u=l.sent,u.success!==!0){l.next=12;break}return j=o.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),F.default.success(j),l.next=10,re();case 10:return q(),l.abrupt("return");case 12:ae(u),l.next=19;break;case 15:l.prev=15,l.t0=l.catch(1),r=o.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),F.default.error(r);case 19:p(!1);case 20:case"end":return l.stop()}},n,null,[[1,15]])}));return function(i){return g.apply(this,arguments)}}(),A=z.success,E=z.data;return Object(e.jsxs)("div",{className:s.a.container,children:[Object(e.jsx)("div",{className:s.a.lang,"data-lang":!0,children:t.b&&Object(e.jsx)(t.b,{})}),Object(e.jsxs)("div",{className:s.a.content,children:[Object(e.jsxs)("div",{className:s.a.top,children:[Object(e.jsxs)("div",{className:s.a.header,children:[Object(e.jsx)("img",{alt:"logo",className:s.a.logo,src:"/github.svg"}),Object(e.jsx)("span",{className:s.a.title,children:"Java Web Scaffold"})]}),Object(e.jsx)("div",{className:s.a.desc,children:"https://github.com/stone0090/java-web-scaffold"})]}),Object(e.jsxs)("div",{className:s.a.main,children:[Object(e.jsxs)(W.b,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:o.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(n,i){return i.pop()},submitButtonProps:{loading:b,size:"large",style:{width:"100%"}}},onFinish:function(){var g=Object(h.a)(c.a.mark(function n(i){return c.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:ne(i);case 1:case"end":return j.stop()}},n)}));return function(n){return g.apply(this,arguments)}}(),children:[A===!1&&E.loginType==="account"&&Object(e.jsx)(T,{content:o.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),N==="account"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{name:"username",fieldProps:{size:"large",prefix:Object(e.jsx)(w.a,{className:s.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),Object(e.jsx)(S.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(L.a,{className:s.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),A===!1&&E.loginType==="mobile"&&Object(e.jsx)(T,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),N==="mobile"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(V.a,{className:s.a.prefixIcon})},name:"mobile",placeholder:o.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),Object(e.jsx)(X.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(L.a,{className:s.a.prefixIcon})},captchaProps:{size:"large"},placeholder:o.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(n,i){return n?"".concat(i," ").concat(o.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):o.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var g=Object(h.a)(c.a.mark(function n(i){var u;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,H({phone:i});case 2:if(u=r.sent,u!==!1){r.next=5;break}return r.abrupt("return");case 5:F.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return r.stop()}},n)}));return function(n){return g.apply(this,arguments)}}()})]}),Object(e.jsxs)("div",{style:{marginBottom:24},children:[Object(e.jsx)(Z.a,{noStyle:!0,name:"autoLogin",children:Object(e.jsx)(t.a,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),Object(e.jsx)("a",{style:{float:"right"},children:Object(e.jsx)(t.a,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]}),Object(e.jsxs)(G.b,{className:s.a.other,children:[Object(e.jsx)(t.a,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"}),Object(e.jsx)(Y.a,{className:s.a.icon}),Object(e.jsx)(D.a,{className:s.a.icon}),Object(e.jsx)(R.a,{className:s.a.icon})]})]})]}),Object(e.jsx)(K.a,{})]})},ce=x.default=_}}]);
