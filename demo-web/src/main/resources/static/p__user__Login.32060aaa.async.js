(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{ObQG:function(C,x,a){C.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(C,x,a){"use strict";a.r(x);var te=a("miYZ"),M=a("tsqr"),G=a("oBTY"),b=a("k1fw"),m=a("9og8"),F=a("tJVT"),re=a("fOrg"),$=a("+KLJ"),J=a("WmNS"),c=a.n(J),E=a("cJ7L"),N=a("FY4R"),V=a("3flX"),y=a("q1tI"),Y=a("VMEa"),S=a("Qurx"),D=a("/aGu"),K=a("tneF"),t=a("9kvl"),Q=a("CwrG"),R=a("Dp36");function X(h,d){return L.apply(this,arguments)}function L(){return L=Object(m.a)(c.a.mark(function h(d,f){return c.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(t.e)("/api/login/captcha",Object(b.a)({method:"POST",params:Object(b.a)({},d)},f||{})));case 1:case"end":return j.stop()}},h)})),L.apply(this,arguments)}var Z=a("ObQG"),i=a.n(Z),e=a("nKUr"),T=function(d){var f=d.content;return Object(e.jsx)($.a,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},W=function(){!t.c||setTimeout(function(){var d=t.c.location.query,f=d,O=f.redirect;t.c.push(O||"/")},10)},H=function(){var d=Object(y.useState)(!1),f=Object(F.a)(d,2),O=f[0],j=f[1],k=Object(y.useState)({}),I=Object(F.a)(k,2),P=I[0],q=I[1],_=Object(y.useState)("account"),U=Object(F.a)(_,2),B=U[0],ie=U[1],w=Object(t.i)("@@initialState"),v=w.initialState,ee=w.setInitialState,o=Object(t.h)(),ae=function(){var g=Object(m.a)(c.a.mark(function r(){var n,l;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,v==null||(n=v.fetchUserInfo)===null||n===void 0?void 0:n.call(v);case 2:l=s.sent,l&&ee(Object(b.a)(Object(b.a)({},v),{},{currentUser:l}));case 4:case"end":return s.stop()}},r)}));return function(){return g.apply(this,arguments)}}(),se=function(){var g=Object(m.a)(c.a.mark(function r(n){var l,p,s;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return j(!0),u.prev=1,u.next=4,R.b.apply(void 0,["/demo/shiro/login",n].concat(Object(G.a)(B)));case 4:if(l=u.sent,l.success!==!0){u.next=12;break}return p=o.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),M.default.success(p),u.next=10,ae();case 10:return W(),u.abrupt("return");case 12:q(l),u.next=19;break;case 15:u.prev=15,u.t0=u.catch(1),s=o.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),M.default.error(s);case 19:j(!1);case 20:case"end":return u.stop()}},r,null,[[1,15]])}));return function(n){return g.apply(this,arguments)}}(),z=P.success,A=P.data;return Object(e.jsxs)("div",{className:i.a.container,children:[Object(e.jsx)("div",{className:i.a.lang,"data-lang":!0,children:t.b&&Object(e.jsx)(t.b,{})}),Object(e.jsxs)("div",{className:i.a.content,children:[Object(e.jsxs)("div",{className:i.a.top,children:[Object(e.jsxs)("div",{className:i.a.header,children:[Object(e.jsx)("img",{alt:"logo",className:i.a.logo,src:"/github.svg"}),Object(e.jsx)("span",{className:i.a.title,children:"Java Web Scaffold"})]}),Object(e.jsx)("div",{className:i.a.desc,children:"https://github.com/stone0090/java-web-scaffold"})]}),Object(e.jsx)("div",{className:i.a.main,children:Object(e.jsxs)(Y.b,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:o.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(r,n){return n.pop()},submitButtonProps:{loading:O,size:"large",style:{width:"100%"}}},onFinish:function(){var g=Object(m.a)(c.a.mark(function r(n){return c.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:se(n);case 1:case"end":return p.stop()}},r)}));return function(r){return g.apply(this,arguments)}}(),children:[z===!1&&A.loginType==="account"&&Object(e.jsx)(T,{content:o.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),B==="account"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{name:"username",fieldProps:{size:"large",prefix:Object(e.jsx)(E.a,{className:i.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),Object(e.jsx)(S.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(N.a,{className:i.a.prefixIcon})},placeholder:o.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),z===!1&&A.loginType==="mobile"&&Object(e.jsx)(T,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),B==="mobile"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(S.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(V.a,{className:i.a.prefixIcon})},name:"mobile",placeholder:o.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:Object(e.jsx)(t.a,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),Object(e.jsx)(D.a,{fieldProps:{size:"large",prefix:Object(e.jsx)(N.a,{className:i.a.prefixIcon})},captchaProps:{size:"large"},placeholder:o.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(r,n){return r?"".concat(n," ").concat(o.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):o.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:Object(e.jsx)(t.a,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var g=Object(m.a)(c.a.mark(function r(n){var l;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,X({phone:n});case 2:if(l=s.sent,l!==!1){s.next=5;break}return s.abrupt("return");case 5:M.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return s.stop()}},r)}));return function(r){return g.apply(this,arguments)}}()})]}),Object(e.jsxs)("div",{style:{marginBottom:24},children:[Object(e.jsx)(K.a,{noStyle:!0,name:"autoLogin",children:Object(e.jsx)(t.a,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),Object(e.jsx)("a",{style:{float:"right"},children:Object(e.jsx)(t.a,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})})]}),Object(e.jsx)(Q.a,{})]})},ne=x.default=H}}]);
